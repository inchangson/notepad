# 인터넷 프로토콜

## 인터넷 통신
### 인터넷에서 컴퓨터들은 어떻게 통신할까?
- 만약 클라이언트 <-> 서버가 바로 옆에 붙어있다면?
	- 케이블이라도 연결해서 통신할 수 있지 않을까?
- 실제 인터넷은 직접 1단계로 연결되지 않는다
  - 즉 수많은 중간 노드들을 거쳐서 가야함 !
	- 근데 정말 수많고 복잡하게 얽혀있음
	- 어떤 규칙으로 어떻게 찾아갈까? IP!

## IP(Internet Protocol)
- 지정한 IP 주소(IP Address)에 데이터 전달
- Packet이라는 통신 단위로 데이터 전달
- 그냥 보내는 게 아니라 IP Packet(package + bucket)이라는 규칙이 있음
- [출발지 IP, 목적지 IP, 기타... ,[전송하고픈 데이터]] 구조로 되어있다.
- 각 노드들이 패킷을 까보았을 때 목적지 주소를 알고 있으니,
- 알아서 목적지에 데이터를 보낼 수 있게 된다.
> 상황) 내가 미국사는 친구에게 "hello"를 보내려고 한다.
- IP Address : 나(100.100.100.1), 친구(200.200.200.2)
- Packet = [100.100.100.1, 200.200.200.2, ["hello"]]
> 그렇다면, 위 방식의 문제점은 무엇일까?
- 비연결성
	- 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
	- 반대로 잘 켜져있다가 패킷이 거의 다 왔을 때 꺼지면 못 받게 됨
- 비신뢰성
	- 중간에 패킷이 사라지면?
	- 패킷이 순서대로 안 오면? 보통 1500B로 끊어서 보내는데, 순서가 반대로 도착할 수도 있다.
- 프로그램 구분
	- 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?


## TCP, UDP
|인터넷 프로토콜의 4계층|
|---|
|애플리케이션 - HTTP, FTP|
|전송 계층 - TCP, UDP|
|인터넷 계층- IP|
|네트워크 인터페이스 계층|

|인터넷 프로토콜의 4계층|세부항목|
|---|---|
|애플리케이션 - HTTP, FTP|웹브라우저, 네트워크 게임 채팅 프로그램 [1 SOCKET 라이브러리]|
|전송 계층(OS) - TCP, UDP|1 + 2TCP/UDP|
|인터넷 계층(OS)- IP|1 + 2 + 3IP|
|네트워크 인터페이스 계층|1 + 2 + 3 + 이더넷프레임 -> (LAN DRIVER, LAN 장비)|

### TCP/IP 패킷 정보
- TCP/IP PACKET = IP PACKET + TCP SEGMENT
- TCP SEGMENT
	- 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보

### TCP
- Transmission Control Protocol(전송 제어 프로토콜)
- 특징
	- 연결 지향(3 way handshake)
	- 데이터 전달 보증
	- 순서 보장
- 또한 신뢰할 수 있는 프로토콜이기 때문에 현재 대부분 TCP 사용

### 3 way handshake
1. SYN(접속 요청) : [클라이언트] -> [서버]
2. SYN+ACK : [클라이언트] <- [서버]
3. ACK(요청 수락) : [클라이언트] -> [서버]
4. 데이터 전송

### UDP
- 기능 다 덜어내고
- PORT(어떤 프로그램 껀지?) + Checksum(검증) 정도만 추가
- 애플리케이션에서 추가 작업 필요

## PORT
- 0 ~ 65535까지 할당 가능
- 0 ~ 1023 : 잘 알려진 포트이기 때문에 사용하지 않는 것이 좋음
	- FTP : 20, 21
	- TELNET : 23
	- HTTP : 80
	- HTTPS : 443

## DNS
### IP의 문제점
1. 기억하기 어렵다
2. 변경될 수 있다
### Domin Name System
- 일종의 전화번호부
- 도메인명을 IP 주소로 전환
### 예시
|도메인명|IP|
|---|---|
|google.com|200.200.200.2|
|aaa.com|210.210.210.3|

1. 즉 바로 구글의 IP를 바로 아는 게 아니라
2. DNS 서버를 거쳐 보내게 된다.